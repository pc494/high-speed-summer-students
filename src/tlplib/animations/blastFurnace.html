<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Blast Furnace</title>

		<!-- Greensock library  -->
		<script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
		<!-- <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/Draggable.min.js"></script> -->
		<script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/MotionPathPlugin.min.js"></script>
		<!-- <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/Flip.min.js"></script> -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/EaselPlugin.min.js"></script> -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/PixiPlugin.min.js"></script> -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/TextPlugin.min.js"></script> -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollToPlugin.min.js"></script> -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script> -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/Observer.min.js"></script> -->
		
		<script> gsap.registerPlugin(MotionPathPlugin)  </script>

		<link rel="stylesheet" href="titlecard.css"/>
		<link rel="stylesheet" href="blastFurnace.css"/>

		<script>
		// hide and show CC licence words
			function showTxt() {   
				document.getElementById("para").style.visibility = 'visible';
			}  // end showTxt

			function hideTxt() { 
				document.getElementById("para").style.visibility = 'hidden';
			}  // end hideTxt
			
			// page navigation
			function gotoPage(p) {
				// replace next fn gEBCN as fails in IE<9
				var x = document.getElementsByClassName("payj");
				var len = x.length;
				for (var i=1; i<(len+1); i++) {
					var ppp = eval('p'+i);
					document.getElementById('p'+i).style.display = 'none';
					if (i == p) {
						document.getElementById('p'+i).style.display = 'block';
					}
				}	
			}
			
			// sets the dimensions of kanvas and positions the bottom logos			
			function setAnimDimensions(w,h)  {
				//w = animation width
				//h = animation height
				document.getElementById("kanvas").style.height = String(h) + "px";
				document.getElementById("kanvas").style.width = String(w) + "px";
				document.getElementById("kanvas").style.margin = "0px auto";
				document.getElementById("kanvas").style.border = "2px solid blue";
				// position footers
				var divcc = document.getElementById("cc");
				var divpara = document.getElementById("para");
				divcc.style.position = 'absolute';
				divpara.style.position = 'absolute';
				divcc.style.top = (h - 40) + "px";
				divpara.style.top = (h - 85) + "px";						
			}
		</script>
		
		<style>

			#container {
				position:relative;
			}
			#kanvas { 
				position:relative;
			}

			/* cc information banner & pop-up */
			#cc {
				position: absolute; 
				width:100%; 
				/*background-color:#cc0000;  */
			}
			
			#para {
				position: absolute;  
				padding:0px;
				font-family:Arial;
				font-weight: bold;
				font-size: 11px;
				color:blue; 
				border-style: solid;
				border-color: #000000;
				border-width:1px;
				visibility: hidden;
				z-index: 200;
				background-color: white;
			}
			
			/* DOiTPoMS buttons */
			.dbutton {
				background-color: pink;
				cursor: pointer;
				height: 25px;
				margin: 5px;
				background-position: bottom;
				display: inline-block;  /* allows on sameline */
			}

			.dbutton:hover {
				background-position: center; 
			}

			#back, #back2, #back3, #back4, #back5, #back6, #back7 {
				width: 79px;
				background-image: url('../../../images/back.png');
			}

			#next, #next2, #next3, #next4, #next5, #next6, #next7 {
				width: 75px;
				background-image: url('../../../images/next.png');
			}
			
			#restart, #restart2, #restart3,  #restart5, #restart6, #restart7 {
				width: 99px;
				background-image: url('../../../images/restart.png');
			}
			#reset {
				width: 84px;
				background-image: url('../../../images/reset.png');
			}
			#start { 
				width: 76px;
				background-image: url('../../../images/start.png');
			}
			#pause {
				width: 83px;
				background-image: url('../../../images/pause.png');
			}
			#continue {
				width: 118px;
				background-image: url('../../../images/continue.png');
			}
			
			.nav {
				position:absolute;
				left:170px;
				top:420px;
				width:300px;
				text-align: center;
			}

			/* page id */
			/* CAHNGE THIS!!! */
			#p1 {
				display:block;				
			}
			#p2, #p3, #p4, #p5, #p6, #p7, #p8, #p9   {
				display:none;				
			}

			/*  Other */
			p,text {
				font-family: sans-serif;
			}

			#caption {
				position: absolute;
				top: 365px;
				height: 45px;
				left: 20px;
				width: 600px;
				margin: auto auto;
				text-align: center;
				vertical-align: middle;
				text-overflow: hidden;
			}
		</style>
		
	</head>
	
	<body>
		<div id="container"> 
			<div id="kanvas"> 

				<!-- DoITPoMS  and CC logos -->
				<div id="para"> 
					Re-use of this resource is governed by a Creative Commons Attribution-<br />
					Noncommercial-Share Alike 2.0 Licence UK: England & Wales<br />
					http://creativecommons.org/licenses/by-nc-sa/2.0/uk/ 
				</div>
				<!-- end para -->
				<div id="cc" > 
					<img src = "../../../images/by-nc-sa.svg" alt="creative commons" onMouseOver="showTxt()" onMouseOut="hideTxt()" height=40 width=120 /> 
					<img src = "../../../images/roo.png" alt="DoITPoMS logo" height=40 width=180 style="float:right"; /> 
				</div>
				<!-- end cc -->

				<script>
					setAnimDimensions(640,480);
				</script>

				<!--  new page starts here    -->
				<div class="payj" id="p1"> 

					<p id="titlecard"> Blast Furnace </p>
					<div class="nav" style="top:280px"> 
						<p class="dbutton" id="start" onClick="gotoPage(2)"></p >
					</div>
					
				</div>
				<!-- end payj - p1 -->

				<!--  new page starts here    -->
				<div class="payj" id="p2"> 

					<p class="dbutton" id="restart" onclick="restart()" style="position:absolute"></p>

					
					<svg width="640" height="350">

						<defs>
							<linearGradient id="mixture_gradient" x1="0%" y1="0%" x2="0%" y2="100%">
								<stop offset="10%" stop-color="lightgrey" stop-opacity="0"/>
								<stop offset="40%" stop-color="rosybrown" stop-opacity="1"/>
								<stop offset="80%" stop-color="firebrick" stop-opacity="1"/>
							</linearGradient>

							<pattern id="ore_fill" x="0" y="0" width="15" height="15" patternUnits="userSpaceOnUse">
								<path style="fill:lightgrey; stroke:grey" d="M10,0 l4,4 l2,-1 l0,4 l4,2 l-2,4 l-6,3 l-3,-2 l-2,1 l-6,-4 l1,-2 l-1,-4 l5,-1 Z" transform="scale(0.6,0.6)"></path>
							</pattern>
						</defs>

						<g id="movers">
							
							<rect id="ores" style="fill:url(#ore_fill)" x="0" width="640" y="0" height="300"></rect>
							<path id="ores_outline" style="fill:white" d="M270,130 q10,-10 30,10 q20,20 40,0 q20,-20 30,-10 l270,0 l0,-130 l-640,0 l0,130 Z"></path>
							<path id="ore" style="fill:lightgrey; stroke:grey" d="M0,0 l4,4 l2,-1 l0,4 l4,2 l-2,4 l-6,3 l-3,-2 l-2,1 l-6,-4 l1,-2 l-1,-4 l5,-1 Z" transform="scale(0.6,0.6)"></path>
							<path id="mixture" style="fill:url(#mixture_gradient)" d="M270,130 q10,-10 30,10 q20,20 40,0 q20,-20 30,-10 l20,0 l0,200 l-140,0 l0,-200 Z"></path>
							
							<circle class="air" style="fill:lightsteelblue;" cx="250" cy="260" r="20"></circle>
							<circle class="air" style="fill:lightsteelblue;" cx="390" cy="260" r="20"></circle>
							
							<rect id="slag" style="fill:darkorange" x=0 width="640" y="255" height="35"></rect>
							<rect id="iron" style="fill:gold" x="0" width="640" y="290" height="30"></rect>

							
							<path id="tuyere" style="fill:lightsteelblue" d="M275,240 l-30,0 a10 10 0 1 0 0 10 l35,0 M365,240 l30,0 a10 10 0 1 1 0 10 l-35,0"></path>
							<g id="slag_plug">
								<rect style="fill:white; stroke:none" x="0" width="275" y="275" height="10"></rect>
								<rect style="fill:dimgrey; stroke:none" x="275" width="16" y="275" height="10"></rect>
							</g>
							<g id="iron_plug">
								<rect style="fill:white; stroke:none" x="365" width="275" y="310" height="10"></rect>
								<rect style="fill:dimgrey; stroke:none" x="349" width="16" y="310" height="10"></rect>
							</g>

							<g id="ore_paths" style="stroke:none; fill:none">
								<path id="hopper_left" d="M310,60 q10,20 -10,40 t-20,50"></path>
								<path id="hopper_right" d="M330,60 q-10,20 10,40 t20,50"></path>
							</g>
							
						</g>

						<g id="furnace">

							<path id="furnace_guts" style="fill:white"
								d="M320,0 l320,0 l00,400 l-640,0 l0,-400 l320,0 
									M310,70 l0,10 l-15,0 l-5,5 l-5,-10 l0,-60 
									l-15,0 l0,75 l5,10 l-5,120 l5,20 l-30,0 
									a10 10 0 1 0 0 10
									l35,0 l10,20 l0,5 l-80,0 
									l0,10 l80,0 l0,35 l60,0 l80,0 
									l0,-10 l-80,0 l0,-40 l10,-20 l35,0 
									a10 10 0 1 0 0 -10
									l-30,0 l5,-20 l-5,-120 l5,-10 l0,-75 
									l-15,0 l0,60 l-5,10 l-5,-5 l-15,0 l0,-10"></path>

							
							<path id="furnace_lining" style="stroke:dimgrey; stroke-width:2px; fill:none"
								d="M310,80 l-15,0 l-5,5 l-5,-10 l0,-60 
									m-15,0 l0,75 l5,10 l-5,120 l5,20 l-30,0 
									a10 10 0 1 0 0 10
									l35,0 l10,20 l0,5 l-80,0 
									m0,10 l80,0 l0,35 l60,0 l80,0 
									m0,-10 l-80,0 l0,-40 l10,-20 l35,0 
									a10 10 0 1 0 0 -10
									l-30,0 l5,-20 l-5,-120 l5,-10 l0,-75 
									m-15,0 l0,60 l-5,10 l-5,-5 l-15,0
									M320,60 l0,30 l-10,10 m10,-10 l10,10"></path> <!-- hopper -->

							<path id="furnace_wall" style="fill:dimgrey; stroke:none"
								d="M310,70 l-20,0 l-5,5 l5,10 l5,-5 l15,0 l0,-10
									M270,90 l-10,10 l-10,120 l10,20 l15,0 l-5,-20 l5,-120 l-5,-10 
									M265,250 l10,20 l0,5 l15,0 l0,-5 l-10,-20 l-15,0
									M275,285 l0,50 l90,0 l0,-15 l-75,0 l0,-35 l-15,0
									M365,310 l0,-40 l10,-20 l-15,0 l-10,20 l0,40 l15,0
									M380,240 l10,-20 l-10,-120 l-10,-10 l-5,10 l5,120 l-5,20 l15,0
									M350,85 l-5,-5 l-15,0 l0,-10 l20,0 l5,5 l-5,10"></path> 
	
						</g>
						
						<g class="hopper pointer">
							<text class="hopper label" x="460" y="125">Hopper</text>
							<line class="hopper line" x1="340" y1="95" x2="450" y2="120"></line>
							<circle class="hopper laser" cx="340" cy="95" r="4" onclick="hopper()"></circle>
						</g>

						<g class="body pointer">
							<text class="body label" x="75" y="215">Reduction of ores</text>
							<line class="body line" x1="300" y1="200" x2="210" y2="210"></line>
							<circle class="body laser" cx="300" cy="200" r="4" onclick="reduction()"></circle>
						</g>

						<g id="reaction_pointer"> 

							<g class="T1 pointer">
								<text class="label" x="430" y="150">230&#x00B0;C</text>
								<text class="label" x="430" y="165">3Fe&#x2082;O&#x2083; + CO &#x27F6; 2Fe&#x2083O&#x2084 + CO&#x2082</text>
								<text class="label" x="430" y="180">Reduction of iron oxides</text>
								<line class="line" x1="320" y1="145" x2="420" y2="145"></line>
								<circle class="laser" cx="320" cy="145" r="4" style="fill:orangered" onclick="click_to_show_text('T1')"></circle>
							</g>

							<g class="T2 pointer">
								<text class="label" x="430" y="165">410&#x00B0;C</text>
								<text class="label" x="430" y="180">Fe&#x2083;O&#x2084; + CO &#x27F6; 3FeO + CO&#x2082</text>
								<text class="label" x="430" y="195">Reduction of iron oxides</text>
								<line class="line" x1="320" y1="160" x2="420" y2="160"></line>
								<circle class="laser" cx="320" cy="160" r="4" style="fill:orange" onclick="click_to_show_text('T2')"></circle>
							</g>

							<g class="T3 pointer">
								<text class="label" x="430" y="180">525&#x00B0;C</text>
								<text class="label" x="430" y="195">FeO + CO &#x27F6; Fe + CO&#x2082</text>
								<text class="label" x="430" y="210">Reduction to iron</text>
								<line class="line" x1="320" y1="175" x2="420" y2="175"></line>
								<circle class="laser" cx="320" cy="175" r="4" style="fill:yellow" onclick="click_to_show_text('T3')"></circle>
							</g>

							<g class="T5 pointer">
								<text class="label" x="430" y="210">945&#x00B0;C</text>
								<text class="label" x="430" y="225">CaCO&#x2083; &#x27F6; CaO + CO&#x2082</text>
								<text class="label" x="430" y="240">Decomposition of limestone</text>
								<line class="line" x1="320" y1="205" x2="420" y2="205"></line>
								<circle class="laser" cx="320" cy="205" r="4" style="fill:cyan" onclick="click_to_show_text('T5')"></circle>
							</g>

							<g class="T6 pointer">
								<text class="label" x="430" y="225">1125&#x00B0;C</text>
								<text class="label" x="430" y="240">CaO + SiO&#x2082; &#x27F6; CaSiO&#x2083</text>
								<text class="label" x="430" y="255">Removal of impurities (SiO&#x2082) to slag</text>
								<line class="line" x1="320" y1="220" x2="420" y2="220"></line>
								<circle class="laser" cx="320" cy="220" r="4" style="fill:blue" onclick="click_to_show_text('T6')"></circle>
							</g>
							

							<g class="T4 pointer">
								<text class="label" x="430" y="195">865&#x00B0;C - 1125&#x00B0;C</text>
								<text class="label" x="430" y="210">C + CO&#x2082; &#x27F6; 2CO</text>
								<text class="label" x="430" y="225">Forming CO which rises further</text>
								<line class="line" x1="320" y1="190" x2="420" y2="190"></line>
								<circle class="laser" cx="320" cy="190" r="4" style="fill:chartreuse" onclick="click_to_show_text('T4')"></circle>
							</g>

							<g class="T7 pointer">
								<text class="label" x="430" y="240">1300&#x00B0;C</text>
								<text class="label" x="430" y="255">C + O&#x2082; &#x27F6; CO&#x2082;</text>
								<text class="label" x="430" y="270">Coke reacts with oxygen</text>
								<text class="label" x="430" y="285">CO&#x2082; rises up the furnace</text>
								<line class="line" x1="320" y1="235" x2="420" y2="235"></line>
								<circle class="laser" cx="320" cy="235" r="4" style="fill:darkviolet" onclick="click_to_show_text('T7')"></circle>
							</g>
							

						</g>

						<g class="exhaust_pipes pointer">
							<text class="exhaust_pipes label" x="105" y="110">Exhaust</text>
							<line class="exhaust_pipes line" x1="275" y1="70" x2="175" y2="100"></line>
							<circle class="exhaust_pipes laser" cx="275" cy="70" r="4" onclick="exhaust_pipes()"></circle>
						</g>

						<g class="product pointer">
							<text class="product label" x="460" y="275">Product</text>
							<line class="product line" x1="340" y1="290" x2="450" y2="270"></line>
							<circle class="product laser" cx="340" cy="290" r="4" onclick="products()"></circle>
						</g>
						
					</svg>
					
					<p id="caption"> <em>Click on red pointers to start</em> </p>
					
					<div class="nav"> 
						<p class="dbutton" id="back" onclick="back()" style="visibility:hidden"></p>
					</div>

					<script>
						var ores_moving_down = gsap.timeline({defaults:{ease:"none"}})
						ores_moving_down.to("#ores", 4, {y:60}).to("#ores", 0, {y:0})
						.to("#ores", 4, {y:60}).to("#ores", 0, {y:0})
						
						var adding_ores_from_hoppers = gsap.timeline({defaults:{ease:"none"}})
						adding_ores_from_hoppers.to("#ore", 2, {motionPath:{path:"#hopper_left"}, transformOrigin: "50% 50%", opacity:0}).set("#ore", {delay:2, opacity:1})
						adding_ores_from_hoppers.to("#ore", 2, {motionPath:{path:"#hopper_right"}, transformOrigin: "50% 50%", opacity:0}).set("#ore", {delay:2, opacity:1})

						var oxygen_blast = gsap.timeline({defaults:{ease:"none"}})
						oxygen_blast.to(".air", 1, {attr:{r:100}, opacity:0}).set(".air", {delay:3,attr:{r:20}, opacity:1})
						
						var exhaust = gsap.timeline({defaults:{ease:"none"}})
						exhaust.to("#mixture", 1, {y:-210, x:-140, scale:3}).to("#mixture", 3, {x:0, y:0, scale:1, ease:"circ.out"})
						
						var taps = gsap.timeline({defaults:{ease:"none"}})
						taps.to("#slag", 1, {y:21, scaleY:0.4}).to("#slag_plug", 1, {x:-80}, "<").set("#slag_plug",{x:0})
						taps.to("#iron", 1, {y:18, scaleY:0.4}).to("#slag", 1, {y:39}, "<").to("#iron_plug", 1, {x:80}, "<").set("#iron_plug",{x:0})
						taps.to("#slag", 6, {y:0, scaleY:1}).to("#iron", 6, {y:0, scaleY:1}, "<")

						var t = gsap.timeline({repeat:-1})
						t.add(ores_moving_down, 0)
						.add(oxygen_blast, 0)
						.add(exhaust, 0)
						.add(adding_ores_from_hoppers, 0)
						.add(taps, 0)

						function restart() {
							gotoPage(1)
							back()
						}
						
						function back(){
							gsap.to("#movers, #furnace", {scale:1, x:0, y:0})
							gsap.to(".pointer", 0.2, {delay:1, opacity:1}, ">")
							gsap.to("#back", {visibility:"hidden"})
							gsap.set("#caption", {innerHTML:"Click on red pointers to start"})
							gsap.to("#reaction_pointer", 0.5, {scale:1, x:0})
							gsap.to("#reaction_pointer .pointer", {visibility:"hidden", opacity:0})

							click_to_show_text(0)
						}

						function hopper(){
							gsap.to(".pointer", 0.2, {opacity:0})
							gsap.to("#movers, #furnace", 0.5, {delay:0.2, scale:2, x:-320})
							gsap.set("#back", {visibility:"visible"}, ">")
							gsap.set("#caption", {innerHTML:"Roasted ore, <button onclick='coke()'>coke</button>, and <button onclick='limestone()'>limestone</button> are added from the hoppers"}, ">")
						}

						function coke(){
							gsap.set("#caption", {innerHTML:"Roasted ore, <strong>coke</strong>, and <button onclick='limestone()'>limestone</button> are added from the hoppers <br> Coke provides carbon, which reacts with oxygen to form CO, the main reduction agent. "})
						}

						function limestone(){
							gsap.set("#caption", {innerHTML:"Roasted ore, <button onclick='coke()'>coke</button>, and <strong>limestone</strong> are added from the hoppers <br> Limestone is primarily CaCO<sub>3</sub>, which reacts with impurities (vairous oxides) to form the slag phase."})
						}

						function reduction(){
							gsap.to(".pointer", 0.2, {opacity:0})
							gsap.to("#movers, #furnace", 0.5, {delay:0.2, scale:1.5, x:-280, y:-100})
							gsap.set("#back", {visibility:"visible"}, ">")
							gsap.set("#caption", {innerHTML:"Ores are gradually reduced and impurities removed, via reduction by the rising gases <br> <em>Hover over pointer to see reactions</em>"}, ">")
							
							gsap.to("#reaction_pointer", 0.5, {scale:1.5, x:-120, y:-25})
							gsap.to("#reaction_pointer .pointer", {delay:0.7, visibility:"visible", opacity:1})
							}


						function click_to_show_text(Tx) {
							document.querySelectorAll("#reaction_pointer .line").forEach(el => el.style.visibility = "hidden")
							document.querySelectorAll("#reaction_pointer .label").forEach(el => el.style.visibility = "hidden")
							if(typeof Tx == "string"){
								document.querySelector("."+Tx+" .line").style.visibility = "visible"
								document.querySelectorAll("."+Tx+" .label").forEach(el => el.style.visibility = "visible")
							}
						}

						function exhaust_pipes(){
							gsap.to(".pointer", 0.2, {opacity:0})
							gsap.to("#movers, #furnace", 0.5, {delay:0.2, scale:1.5, x:-160, y:70})
							gsap.set("#back", {visibility:"visible"})
							gsap.set("#caption", {innerHTML:"Exhuast gases rise to the top; these include CO, CO<sub>2</sub>, N<sub>2</sub>, etc., with considerable environmental impacts"})
						}

						
						function products(){
							gsap.to(".pointer", 0.2, {opacity:0})
							gsap.to("#movers, #furnace", 0.5, {delay:0.2, scale:1.5, x:-160, y:-200})
							gsap.set("#back", {visibility:"visible"})
							gsap.set("#caption", {innerHTML:"High temperature at the bottom means that <button onclick='slag()'>slag</button> and iron are both molten. <br> The slag floats on top as it is less dense, and is tapped off separately to the iron."})
						}

						function slag(){
							gsap.set("#caption", {innerHTML: "The slag consists of various metal oxides and other impurites, and is recycled for use in construction (cement, aggregates, etc.)."})
						}


						
					</script>
					
				</div>
				<!-- end payj - p2 -->

			</div> <!-- kanvas -->

		</div> <!-- container -->

	</body>
</html>