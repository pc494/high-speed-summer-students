<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Electric arc Furnace</title>

		<!-- Greensock library  -->
		<script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
		<!-- <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/Draggable.min.js"></script> -->
		<script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/MotionPathPlugin.min.js"></script>
		<!-- <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/Flip.min.js"></script> -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/EaselPlugin.min.js"></script> -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/PixiPlugin.min.js"></script> -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/TextPlugin.min.js"></script> -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollToPlugin.min.js"></script> -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script> -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/Observer.min.js"></script> -->
		

		<link rel="stylesheet" href="titlecard.css"/>

		<script>
		// hide and show CC licence words
			function showTxt() {   
				document.getElementById("para").style.visibility = 'visible';
			}  // end showTxt

			function hideTxt() { 
				document.getElementById("para").style.visibility = 'hidden';
			}  // end hideTxt
			
			// page navigation
			function gotoPage(p) {
				// replace next fn gEBCN as fails in IE<9
				var x = document.getElementsByClassName("payj");
				var len = x.length;
				for (var i=1; i<(len+1); i++) {
					var ppp = eval('p'+i);
					document.getElementById('p'+i).style.display = 'none';
					if (i == p) {
						document.getElementById('p'+i).style.display = 'block';
					}
				}	
			}
			
			// sets the dimensions of kanvas and positions the bottom logos			
			function setAnimDimensions(w,h)  {
				//w = animation width
				//h = animation height
				document.getElementById("kanvas").style.height = String(h) + "px";
				document.getElementById("kanvas").style.width = String(w) + "px";
				document.getElementById("kanvas").style.margin = "0px auto";
				document.getElementById("kanvas").style.border = "2px solid blue";
				// position footers
				var divcc = document.getElementById("cc");
				var divpara = document.getElementById("para");
				divcc.style.position = 'absolute';
				divpara.style.position = 'absolute';
				divcc.style.top = (h - 40) + "px";
				divpara.style.top = (h - 85) + "px";						
			}
		</script>
		
		<style>

			#container {
				position:relative;
			}
			#kanvas { 
				position:relative;
			}

			/* cc information banner & pop-up */
			#cc {
				position: absolute; 
				width:100%; 
				/*background-color:#cc0000;  */
			}
			
			#para {
				position: absolute;  
				padding:0px;
				font-family:Arial;
				font-weight: bold;
				font-size: 11px;
				color:blue; 
				border-style: solid;
				border-color: #000000;
				border-width:1px;
				visibility: hidden;
				z-index: 200;
				background-color: white;
			}
			
			/* DOiTPoMS buttons */
			.dbutton {
				background-color: pink;
				cursor: pointer;
				height: 25px;
				margin: 5px;
				background-position: bottom;
				display: inline-block;  /* allows on sameline */
			}

			.dbutton:hover {
				background-position: center; 
			}

			#back, #back2, #back3, #back4, #back5, #back6, #back7 {
				width: 79px;
				background-image: url('../../../images/back.png');
			}

			#next, #next2, #next3, #next4, #next5, #next6, #next7 {
				width: 75px;
				background-image: url('../../../images/next.png');
			}
			
			#restart, #restart2, #restart3,  #restart5, #restart6, #restart7 {
				width: 99px;
				background-image: url('../../../images/restart.png');
			}
			#reset {
				width: 84px;
				background-image: url('../../../images/reset.png');
			}
			#start { 
				width: 76px;
				background-image: url('../../../images/start.png');
			}
			#pause {
				width: 83px;
				background-image: url('../../../images/pause.png');
			}
			#continue {
				width: 118px;
				background-image: url('../../../images/continue.png');
			}
			
			.nav {
				position:absolute;
				left:170px;
				top:420px;
				width:300px;
				text-align: center;
			}

			/* page id */
			#p1 {
				display:block;				
			}
			#p2, #p3, #p4, #p5, #p6, #p7, #p8, #p9   {
				display:none;				
			}

			/*  Other */
			p,text {
				font-family: sans-serif;
			}

			#caption {
				position: absolute;
				top: 365px;
				height: 45px;
				left: 20px;
				width: 600px;
				margin: auto auto;
				text-align: center;
				vertical-align: middle;
				text-overflow: hidden;
			}
		</style>
		
	</head>
	
	<body>
		<div id="container"> 
			<div id="kanvas"> 

				<!-- DoITPoMS  and CC logos -->
				<div id="para"> 
					Re-use of this resource is governed by a Creative Commons Attribution-<br />
					Noncommercial-Share Alike 2.0 Licence UK: England & Wales<br />
					http://creativecommons.org/licenses/by-nc-sa/2.0/uk/ 
				</div>
				<!-- end para -->
				<div id="cc" > 
					<img src = "../../../images/by-nc-sa.svg" alt="creative commons" onMouseOver="showTxt()" onMouseOut="hideTxt()" height=40 width=120 /> 
					<img src = "../../../images/roo.png" alt="DoITPoMS logo" height=40 width=180 style="float:right"; /> 
				</div>
				<!-- end cc -->

				<script>
					setAnimDimensions(640,480);
				</script>

				<!--  new page starts here    -->
				<div class="payj" id="p1"> 

					<p id="titlecard"> Electric Arc Furnace (EAF) </p>
					<div class="nav" style="top:280px"> 
						<p class="dbutton" id="start" onClick="gotoPage(2)"></p >
					</div>
					
				</div>
				<!-- end payj - p1 -->

				<!--  new page starts here    -->
				<div class="payj" id="p2"> 

					<p class="dbutton" id="restart" onclick="restart()" style="position:absolute"></p>
					
					<svg id="svg" width="640" height="350">	

						<defs>
							<marker id="flange" markerWidth="10" markerHeight="10" refX="0" refY="1" orient="auto-start-reverse" markerUnits="strokeWidth">
								<path d="M0,0 L0,2 L0.9,2 L0.9,0 z" fill="dimgrey" stroke="none"/>
								<path d="M1,0 L1,2 L0.9,2 L0.9,0 z" fill="none" stroke="none"/>
							</marker>

							<linearGradient id="fire_fill" x1="0%" y1="0%" x2="0%" y2="100%">
								<stop offset="0%" stop-color="gold" stop-opacity="1"></stop>
								<stop offset="20%" stop-color="darkorange" stop-opacity="0.7"></stop>
								<stop offset="100%" stop-color="darkorange" stop-opacity="0"></stop>
							</linearGradient>

							<linearGradient id="oxygen_fill" x1="0%" y1="0%" x2="0%" y2="100%">
								<stop offset="0%" stop-color="lightgoldenrodyellow" stop-opacity="1"></stop>
								<stop offset="20%" stop-color="lightsteelblue" stop-opacity="0.7"></stop>
								<stop offset="100%" stop-color="lightsteelblue" stop-opacity="0"></stop>
							</linearGradient>

							<linearGradient id="hot_air_fill" x1="0%" y1="0%" x2="0%" y2="100%">
								<stop offset="0%" stop-color="indianred" stop-opacity="0"></stop>
								<stop offset="70%" stop-color="indianred" stop-opacity="0.3"></stop>
							</linearGradient>

							<linearGradient id="blocker_fill" x1="0%" y1="0%" x2="0%" y2="100%">
								<stop offset="70%" stop-color="white" stop-opacity="1"></stop>
								<stop offset="100%" stop-color="white" stop-opacity="0"></stop>
							</linearGradient>

							<linearGradient id="pour_blocker_fill" x1="0%" y1="0%" x2="0%" y2="100%">
								<stop offset="0%" stop-color="white" stop-opacity="0"></stop>
								<stop offset="70%" stop-color="white" stop-opacity="1"></stop>
							</linearGradient>

							<radialGradient id="iron_melt" cy="0" fy="0" gradientTransform="scale(1,4)">
								<stop offset="50%" stop-color="gold"/>
								<stop offset="100%" stop-color="rosybrown"/>
							</radialGradient>
						</defs>

						<g>
							<path class="motion_paths" id="pour_path" style="fill:none; stroke-width:8px; stroke-linecap:round" d=""></path>
							<path class="motion_paths" id="neg_path" style="fill:none; stroke:white; stroke-width:10px; stroke-linecap:square" d=""></path>
							<rect class="motion_paths" id="end_block" x="0" y="0" width="60" height="60" style="fill:url(#pour_blocker_fill)"></rect>
						</g>

						<g id="furnace">

							<path id="furnace_guts" style="fill:url(#hot_air_fill)" d="M330,180 l40,-15 l0,-15 l100,0 l0,15 l40,15 l0,100 l-180,0 Z"></path>

							<path class="furnace"
							d="M320,170 l40,-10 l15,0 l0,10 l-30,10 l0,50 l-25,0 Z 
							M520,170 l-40,-10 l-15,0 l0,10 l30,10 l0,80 l25,0 Z 
							M320,240 l25,0 l0,35 l150,0 l0,-5 l25,0 l0,30 l-200,0 Z"></path>
							
							<line class="fire" x1="350" y1="210" x2="370" y2="270"></line>
							<line class="fire" x1="490" y1="210" x2="470" y2="270"></line>
							<line class="oxygen" x1="350" y1="210" x2="370" y2="270"></line>
							<line class="oxygen" x1="490" y1="210" x2="470" y2="270"></line>
							<path class="burner" d="M345,180 l6,18 l-6,6 Z M495,180 l-6,18 l6,6 Z"></path>

							<g id="furnace_lid">
								<path class="furnace" d="M360,145 l0,15 l15,0 l0,-5 l15,0 l0,-10 Z m40,0 l0,10 l15,0 l0,-10 Z m25,0 l0,10 l15,0 l0,-10 Z m25,0 l0,10 l15,0 l0,5 l15,0 l0,-15 Z"></path>
								<path class="pipe" marker-end="url(#flange)" d="M380,145 l0,-10 l-25,0"></path>
								<g id="electrodes">
									<line class="electrode" x1="395" y1="70" x2="395" y2="220"></line>
									<line class="electrode" x1="420" y1="70" x2="420" y2="220"></line>
									<line class="electrode" x1="445" y1="70" x2="445" y2="220"></line>
								</g>
								<rect id="blocker" style="fill:url(#blocker_fill); stroke:none" x="380" y="0" width="80" height="120"></rect>
							</g>

							<g id="furnace_plugs">
								<rect class="furnace_plug" id="furnace_plug_left" x="320" y="230" width="25" height="10"></rect>
								<rect class="furnace_plug" id="furnace_plug_right" x="495" y="260" width="25" height="10"></rect>
							</g>
						</g>

						<g id="bin">
							<path id="bin_guts" style="fill:url(#hot_air_fill)" d="M85,220 l100,0 l0,70 l-100,0 Z"></path>
							<path class="bin" d="M80,220 a120,80 0 0 1 120,0 l0,70 l-15,0 l0,-60 a120,80 0 0 0 -90,0 l0,60 l-15,0 Z"></path>

							<rect class="bin" id="bin_left" x="80" y="290" width="60" height="10"></rect>
							<rect class="bin" id="bin_right" x="140" y="290" width="60" height="10"></rect>

							<path class="pipe" marker-end="url(#flange)" d="M200,240 l15,0"></path>
						</g>

						<g>
							<rect class="content" id="slag" style="fill:rosybrown" x="345" y="265" width="150" height="5"></rect>
							<rect class="content" id="charge" style="fill:slategrey" x="95" y="250" width="90" height="40"></rect>
							<rect class="content" id="iron" style="fill:rosybrown" x="345" y="270" width="150" height="5"></rect>
						</g>

						<g id="arcs">
							<path class="arc_shadow" d="M395,220 q13,10 25,0"></path>
							<path class="arc_shadow" d="M420,220 q12,10 25,0"></path>
							<path class="arc_shadow" d="M395,220 q25,10 50,0"></path>
							<path class="arc" d="M395,220 q13,10 25,0"></path>
							<path class="arc" d="M420,220 q12,10 25,0"></path>
							<path class="arc" d="M395,220 q25,10 50,0"></path>
						</g>

						<path class="pipe" id="fixed_pipe" marker-start="url(#flange)" marker-end="url(#flange)" d="M235,240 l40,0 l0,-105 l60,0"></path>
						<path id="piped_gas" style="fill:none; stroke:indianred; stroke-width:4px" d="M380,145 l0,-10 l-105,0 l0,105 l-75,0"></path>

					</svg>

					<style>
						.bin, .furnace {
							fill:dimgrey;
							stroke: none
						}

						.pipe {
							fill: none;
							stroke: darkgrey;
							stroke-width: 10px;
						}

						.burner, .furnace_plug{
							fill: darkgrey;
							stroke: none
						}

						.fire {
							fill: none;
							stroke: url(#fire_fill);
							stroke-width: 10px;
							stroke-linecap: round;
							filter: blur(2px);
						}

						.oxygen {
							fill: none;
							stroke:url(#oxygen_fill);
							stroke-width: 10px;
							stroke-linecap: round;
							filter: blur(2px);
						}

						.electrode {
							fill: none;
							stroke: darkorange;
							stroke-width: 10px;
						}

						.arc {
							fill: none;
							stroke: white;
							stroke-width: 2px;
							stroke-linecap: round;
						}

						.arc_shadow {
							fill: none;
							stroke: yellow;
							stroke-width: 5px;
							stroke-linecap: round;
							filter: blur(5px);
						}

						.motion_paths, #bin, #fixed_pipe, #charge, #piped_gas, .fire, .oxygen, #arcs {
							visibility: hidden;
							opacity: 0;
						}
						
						#guidelines {
							stroke: grey;
							stroke-opacity: 0.7;
						}
					</style>
					
					<p id="caption"></p>
					
					<div class="nav"> 
						<p class="dbutton" id="back" onclick="back()"></p>
						<p class="dbutton" id="next" onclick="next()"></p>
					</div>

					<script>

						var prv = 0
						var nxt = 1
						var curr = 1

						function pour(timeline, start, end, colour, dur){

							var pour_path = document.querySelector("#pour_path")
							var neg_path = document.querySelector("#neg_path")
							var blocker = document.querySelector("#end_block")

							var upper_point = {x:start.split(",")[0], y:start.split(",")[1]}
							var lower_point = {x:end.split(",")[0], y:end.split(",")[1]}
							var mid_point = {}
							mid_point.x = lower_point.x
							mid_point.y = Number(upper_point.y) + Number(0.25*(lower_point.y - upper_point.y))
							var d_string = `M${upper_point.x},${upper_point.y} Q${mid_point.x},${mid_point.y} ${lower_point.x},${lower_point.y}`

							function set_d() {
								pour_path.setAttribute("d", d_string)
								neg_path.setAttribute("d", d_string)
								blocker.setAttribute("x", lower_point.x-30)
								blocker.setAttribute("y", lower_point.y-45)
							}

							timeline.set([pour_path, neg_path, blocker], {opacity:1, onComplete:set_d})
							timeline.set(blocker, {visibility:"visible"})
							timeline.set(pour_path, {stroke:colour})
							timeline.set(pour_path, {visibility: "visible"})
							var phantom1 = {progress:0}
							function start_pour_update(){
								pour_path.style.strokeDasharray = [phantom1.progress*pour_path.getTotalLength(), pour_path.getTotalLength()].join(" ")
							}
							timeline.to(phantom1, 0.5, {progress:1, onUpdate:start_pour_update})
							
							timeline.set(neg_path, {visibility: "visible"}, ">+"+dur)
							var phantom2 = {progress:0}
							function end_pour_update(){
								neg_path.style.strokeDasharray = [phantom2.progress*neg_path.getTotalLength(), neg_path.getTotalLength()].join(" ")
							}
							timeline.to(phantom2, 0.5, {progress:1, onUpdate:end_pour_update})

							timeline.set([pour_path, neg_path, blocker], {visibility: "hidden", opacity:0})
	
						}

						var t=gsap.timeline({paused:true, defaults:{duration:0, delay:0.0001, ease:"none"}})

						t.addLabel("t0", 0)
						.set("#caption", {innerHTML: "EAF is typically used for recycling or as the succeeding step to DRI."})
						.set("#furnace, #iron, #slag", {x:-100})
						.set("#furnace_guts", {opacity:0})

						t.addLabel("t1", ">")
						.set("#caption", {innerHTML: "The mix of starting materials (<strong>sponge iron, scrap, and fluxes</strong>) is known as the <strong>charge</strong>, and is loaded into a large bucket."})
						.set("#bin, #charge", {visibility:"visible"})
						.set("#bin_guts", {opacity:0})
						.set("#bin, #charge", {x:-100})
						.to("#bin, #charge", 0.5,{opacity:1})
						.to("#furnace, #iron, #slag, #bin, #charge", 1, {x:0}, "<")

						var piped_gas = document.getElementById("piped_gas")
						var phantom_gas = {length:0, totalLength:piped_gas.getTotalLength()}
						function gasflowupdate() {piped_gas.style.strokeDasharray = [phantom_gas.length, phantom_gas.totalLength].join(" ")}
						t.addLabel("t2", ">")
						.set("#caption", {innerHTML: "The cold charge is sometimes <strong>pre-heated using waste gases</strong> from the furnace, to improve overall energy efficiency."})
						.set("#fixed_pipe, #piped_gas", {visibility:"visible"})
						.set("#charge", {fill:"#708090"})
						.to("#fixed_pipe", 1, {opacity:1})
						.to("#furnace_guts", 0.5, {opacity:1})
						.to(piped_gas, 0.5, {opacity:1})
						.to(phantom_gas, 1, {length:phantom_gas.totalLength, onUpdate:gasflowupdate}, "<")
						.to("#bin_guts", 0.5, {opacity:1}, ">")
						.to("#charge", 0.5, {fill:"#bc8f8f", duration:0.5}, ">")

						t.addLabel("t3", ">")
						.set("#caption", {innerHTML: "The furnace lid is removed for loading. <br> The electrodes are either partially lifted or completely removed, depending on the exact furnace design."})
						.to("#piped_gas, #furnace_guts", 2, {opacity:0})
						.to("#electrodes", 1, {y:-60}, "<")
						.to("#furnace_lid", 1, {x:140})

						t.addLabel("t4", ">")
						.set("#caption", {innerHTML: "The bucket is lifted above the furnace, and doors at the bottom of the bucket open to release the charge."})
						.to("#furnace_lid", 1, {opacity:0})
						.to("#bin, #charge", 1, {y:-190}, "<")
						.to("#bin, #charge", 1, {x:280})
						.to("#bin, #charge", 0.5, {y:-142})
						.to("#bin_guts", 0.5, {opacity:0})
						.to("#bin_left", 0.5, {attr:{width:15}}, "<")
						.to("#bin_right", 0.5, {x:45, attr:{width:15}}, "<")
						.to("#charge", 0.5, {x:0, y:0, attr:{x:375, y:235, width:90, height:40}}, ">")
						.to("#charge", 0.1, {x:0, y:0, attr:{x:345, y:240, width:150, height:35}}, ">")

						t.addLabel("t5", ">")
						.set("#caption", {innerHTML: "The lid is set back in place and electrodes are lowered."})
						.to("#bin_left, #bin_right", 0.5, {x:0, attr:{width:60}}, "<")
						.to("#bin", 0.5, {y:-190})
						.to("#bin", 1, {x:0})
						.to("#furnace_lid", 1, {opacity:1, x:0}, "<")
						.to("#bin", 1, {y:0})
						.to("#electrodes", 1, {y:0}, "<")
						.to("#bin, #fixed_pipe", 1, {opacity:0})
						.to("svg > *", 1, {x:-100}, "<")
						.set("#bin, #fixed_pipe", {visibility:"hidden", opacity:0})

						t.addLabel("t6", ">")
						.set("#caption", {innerHTML: "Electric arcs are generated between the graphite electrodes by applying large voltages, generating heat which melts the charge. <br> Arc temperature may reach roughly 3000&#x00B0;C."})
						.set("#arcs", {visibility:"visible"})
						.set("#iron", {opacity:0, x:0, y:0, fill:"url(#iron_melt)", attr:{x:345, y:240, width:150, height:35}})
						.to("#arcs", 0.1, {opacity:1})
						.to("#iron", 1, {opacity:1}, "<")
						.set("#charge", {fill:"gold"})

						t.addLabel("t7", ">")
						.set("#caption", {innerHTML: "Additional heat is directed at cold spots around the edge of the furnace. This may be done using burners in the furnace wall, which inject burning natural gas."})
						.set(".fire", {visibility:"visible"})
						.to(".fire", 0.5, {opacity:1})
						.to("#iron", 1, {opacity:0})
						.set("#iron", {fill:"gold", opacity:1})
						.set("#charge", {visibility:"hidden", opacity:0, x:0, y:0, fill:"#708090", attr:{x:"95", y:"250", width:"90", height:"40"}})

						t.addLabel("t8", ">")
						.set("#caption", {innerHTML: "Once the charge is completely melted, O&#x2082; is injected (via the burners or otherwise) to react with impurites and remove them to a slag phase."})
						.set(".oxygen, #slag", {visibility:"visible"})
						.set("#slag", {fill:"#ffa500", attr:{y:240}})
						.to(".oxygen", 1, {opacity:1})
						.to(".fire", 1, {opacity:0}, "<")
						.to("#furnace_guts", 1, {opacity:1}, "<")
						.to("#iron", 1, {attr:{y:245, height:30}})
						.set(".fire", {visibility:"hidden"})

						t.addLabel("t9", ">")
						.set("#caption", {innerHTML: "C present in the mixture also react wiht O&#x2082; to form CO, which reduces any oxdised iron in the slag. It also foams the slag, improving thermal efficiency."})
						.to("#slag", 1, {fill:"#deb887", opacity:0.7, attr:{y:225, height:20}})

						t.addLabel("t10", ">")
						.set("#caption", {innerHTML: "Once ideal composition is reached, the slag and steel are tapped off separately. The steel is often transferred directly to the secondary steelmaking processes in its molten state."})
						.set("#iron", {fill:"#ffd700"})
						.to(".oxygen, #arcs", 1, {opacity:0})
						pour(t, "320,235", "240,290", "burlywood", 0.5)
						t.to("#slag", 1.5, {attr:{y:240, height:10}}, ">-1.5")
						t.to("#slag", 2, {opacity:0.8}, "<")
						pour(t, "520,265", "600,320", "gold", 1)
						t.to("#iron", 2, {attr:{y:270, height:5}}, ">-2")
						.to("#slag", 2, {attr:{y:265}}, "<")
						.to("#iron, #slag", 2, {opacity:1, fill:"#bc8f8f"}, "<")
						.set(".oxygen, #arcs", {visibility:"hidden"})

						t.addLabel("t11", ">")
						.set("#caption", {innerHTML: "A few tonnes of steel and slag is often left in the furnace to preheat the next charge."})
						.set("#fixed_pipe, #piped_gas, #charge, #bin", {visibility:"visible"})
						.to("svg > *", 1, {x:0})
						.to("#fixed_pipe, #bin, #charge", 1, {opacity:1}, "<")
						.to("#furnace_guts", 0.5, {opacity:1})
						.to("#piped_gas", 0.5, {opacity:1})
						.to("#bin_guts", 0.5, {opacity:1}, "<")
						.to("#charge", 0.5, {fill:"#bc8f8f", duration:0.5}, "<")

						function restart(){
							gotoPage(1)
							prv = 0
							nxt = 1
							curr = move(prv, nxt)
						}

						function next(){
							prv = curr
							nxt = Number(curr)+1
							curr = move(prv, nxt)
						}

						function back(){
							prv = curr
							nxt = Number(curr)-1
							curr = move(prv,nxt, "c")
						}

						var maxstep = Object.keys(t.labels).length 
						var speed = 2
						function move(prv, nxt, dir="f") {

							gsap.set("#back, #next", {visibility: "hidden"})

							if (dir=="f") {
								t.timeScale(speed).tweenFromTo("t" + prv, "t" + nxt); 
								var dur = Math.abs((t.labels["t"+nxt] - t.labels["t"+prv])/speed);
							} else {
								t.seek("t"+nxt); 
								var dur = 0;
							}

							curr = nxt;
							console.log(prv, curr, nxt);
							
							if (curr > 1) {
								gsap.set("#back", {visibility: "visible", delay:dur});
								}
							if (curr < maxstep) {
								gsap.set("#next", {visibility: "visible", delay:dur});
							}

							return curr;
						}

						move(0,1);

					</script>
					
				</div>
				<!-- end payj - p2 -->

			</div> <!-- kanvas -->

		</div> <!-- container -->

	</body>
</html>